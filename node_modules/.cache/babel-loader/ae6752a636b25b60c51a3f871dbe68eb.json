{"ast":null,"code":"var _jsxFileName = \"/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test_2/src/components/TopBar/TopBar.tsx\";\nimport React from 'react'; // import { serverPath, getColorHex } from '../../utils';\n\nimport { serverPath } from '../../utils';\nimport { Icon, Popup, Button, Dropdown } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\nexport class NewRoomButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.createRoom = async () => {\n      const response = await window.fetch(serverPath + '/createRoom', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({})\n      });\n      const data = await response.json();\n      const {\n        name\n      } = data;\n      window.location.hash = '#' + name;\n      window.location.reload();\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Popup, {\n      content: \"Create a new room with a random URL that you can share with friends\",\n      trigger: /*#__PURE__*/React.createElement(Button, {\n        color: \"blue\",\n        size: this.props.size,\n        icon: true,\n        labelPosition: \"left\",\n        onClick: this.createRoom,\n        className: \"toolButton\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"certificate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }\n      }), \"WatchParty\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 7\n      }\n    });\n  }\n\n}\nexport class SignInButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoginOpen: false\n    };\n\n    this.facebookSignIn = async () => {\n      const provider = new firebase.auth.FacebookAuthProvider();\n      await firebase.auth().signInWithPopup(provider);\n    };\n\n    this.googleSignIn = async () => {\n      const provider = new firebase.auth.GoogleAuthProvider();\n      await firebase.auth().signInWithPopup(provider);\n    };\n\n    this.signOut = () => {\n      firebase.auth().signOut();\n      window.location.reload();\n    };\n  }\n\n  render() {\n    if (this.props.user) {\n      return /*#__PURE__*/React.createElement(Button, {\n        style: {\n          height: '36px'\n        },\n        icon: true,\n        labelPosition: \"left\",\n        onClick: this.signOut,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"sign out\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }\n      }), \"Sign out\");\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, this.state.isLoginOpen && /*#__PURE__*/React.createElement(LoginModal, {\n      closeLogin: () => this.setState({\n        isLoginOpen: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\nexport class ListRoomsButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rooms: []\n    };\n\n    this.refreshRooms = async () => {\n      if (this.props.user) {\n        var _this$props$user;\n\n        const token = await this.props.user.getIdToken();\n        const response = await axios.get(serverPath + `/listRooms?uid=${(_this$props$user = this.props.user) === null || _this$props$user === void 0 ? void 0 : _this$props$user.uid}&token=${token}`);\n        this.setState({\n          rooms: response.data\n        });\n      }\n    };\n\n    this.deleteRoom = async roomId => {\n      if (this.props.user) {\n        var _this$props$user2;\n\n        const token = await this.props.user.getIdToken();\n        await axios.delete(serverPath + `/deleteRoom?uid=${(_this$props$user2 = this.props.user) === null || _this$props$user2 === void 0 ? void 0 : _this$props$user2.uid}&token=${token}&roomId=${roomId}`);\n        this.setState({\n          rooms: this.state.rooms.filter(room => room.roomId !== roomId)\n        });\n        this.refreshRooms();\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Dropdown, {\n      style: {\n        height: '36px'\n      },\n      icon: \"group\",\n      labeled: true,\n      className: \"icon\",\n      button: true,\n      text: \"My Rooms\",\n      onClick: this.refreshRooms,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }\n    }, this.state.rooms.length === 0 && /*#__PURE__*/React.createElement(Dropdown.Item, {\n      disabled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, \"You have no permanent rooms.\"), this.state.rooms.map(room => {\n      return /*#__PURE__*/React.createElement(Dropdown.Item, {\n        link: true,\n        href: room.vanity ? '/r/' + room.vanity : '/' + room.roomId.replace('/', '#'),\n        onClick: () => {\n          if (!room.vanity) {\n            setTimeout(() => window.location.reload(), 100);\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 17\n        }\n      }, room.vanity ? `/r/${room.vanity}` : room.roomId.replace('/', '#'), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: 'auto',\n          paddingLeft: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Popup, {\n        content: \"Delete room\",\n        trigger: /*#__PURE__*/React.createElement(Icon, {\n          onClick: e => {\n            e.stopPropagation();\n            this.deleteRoom(room.roomId);\n          },\n          name: \"x\",\n          color: \"red\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }\n      }))));\n    })));\n  }\n\n}\nexport class TopBar extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        padding: '1em',\n        paddingBottom: '0px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/\",\n      style: {\n        display: 'flex'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/fayrtv_logo.png\",\n      alt: \"FAYR TV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        marginLeft: '10px',\n        alignItems: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }\n    }, !this.props.hideNewRoom && /*#__PURE__*/React.createElement(NewRoomButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 41\n      }\n    }), !this.props.hideMyRooms && this.props.user && /*#__PURE__*/React.createElement(ListRoomsButton, {\n      user: this.props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 15\n      }\n    }), !this.props.hideSignin && /*#__PURE__*/React.createElement(SignInButton, {\n      user: this.props.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 40\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/tinvotan/Projects/fayrtv/fayr_test/fayrtv_test_2/src/components/TopBar/TopBar.tsx"],"names":["React","serverPath","Icon","Popup","Button","Dropdown","firebase","LoginModal","axios","NewRoomButton","Component","createRoom","response","window","fetch","method","headers","body","JSON","stringify","data","json","name","location","hash","reload","render","props","size","SignInButton","state","isLoginOpen","facebookSignIn","provider","auth","FacebookAuthProvider","signInWithPopup","googleSignIn","GoogleAuthProvider","signOut","user","height","setState","ListRoomsButton","rooms","refreshRooms","token","getIdToken","get","uid","deleteRoom","roomId","delete","filter","room","componentDidMount","length","map","vanity","replace","setTimeout","display","marginLeft","paddingLeft","e","stopPropagation","TopBar","flexWrap","padding","paddingBottom","alignItems","hideNewRoom","hideMyRooms","hideSignin"],"mappings":"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","sourcesContent":["import React from 'react';\n// import { serverPath, getColorHex } from '../../utils';\nimport { serverPath } from '../../utils';\nimport { Icon, Popup, Button, Dropdown } from 'semantic-ui-react';\nimport * as firebase from 'firebase/app';\nimport 'firebase/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\n\nexport class NewRoomButton extends React.Component<{ size?: string }> {\n  createRoom = async () => {\n    const response = await window.fetch(serverPath + '/createRoom', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({}),\n    });\n    const data = await response.json();\n    const { name } = data;\n    window.location.hash = '#' + name;\n    window.location.reload();\n  };\n  render() {\n    return (\n      <Popup\n        content=\"Create a new room with a random URL that you can share with friends\"\n        trigger={\n          <Button\n            color=\"blue\"\n            size={this.props.size as any}\n            icon\n            labelPosition=\"left\"\n            onClick={this.createRoom}\n            className=\"toolButton\"\n          >\n            <Icon name=\"certificate\" />\n            WatchParty\n          </Button>\n        }\n      />\n    );\n  }\n}\n\nexport class SignInButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { isLoginOpen: false };\n\n  facebookSignIn = async () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  googleSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    if (this.props.user) {\n      return (\n        <Button\n          style={{ height: '36px' }}\n          icon\n          labelPosition=\"left\"\n          onClick={this.signOut}\n        >\n          <Icon name=\"sign out\" />\n          Sign out\n        </Button>\n      );\n    }\n    return (\n      <React.Fragment>\n        {this.state.isLoginOpen && (\n          <LoginModal\n            closeLogin={() => this.setState({ isLoginOpen: false })}\n          />\n        )}\n        {/* <Popup\n          basic\n          content=\"Sign in to automatically set your name and picture\"\n          trigger={\n            <Dropdown\n              style={{ height: '36px' }}\n              icon=\"sign in\"\n              labeled\n              className=\"icon\"\n              button\n              text=\"Sign in\"\n            >\n              <Dropdown.Menu>\n                <Dropdown.Item onClick={this.facebookSignIn}>\n                  <Icon name=\"facebook\" />\n                  Facebook\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.googleSignIn}>\n                  <Icon name=\"google\" />\n                  Google\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.setState({ isLoginOpen: true })}\n                >\n                  <Icon name=\"mail\" />\n                  Email\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n        /> */}\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ListRoomsButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { rooms: [] as PermanentRoom[] };\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  refreshRooms = async () => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      const response = await axios.get(\n        serverPath + `/listRooms?uid=${this.props.user?.uid}&token=${token}`\n      );\n      this.setState({ rooms: response.data });\n    }\n  };\n\n  deleteRoom = async (roomId: string) => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      await axios.delete(\n        serverPath +\n          `/deleteRoom?uid=${this.props.user?.uid}&token=${token}&roomId=${roomId}`\n      );\n      this.setState({\n        rooms: this.state.rooms.filter((room) => room.roomId !== roomId),\n      });\n      this.refreshRooms();\n    }\n  };\n\n  render() {\n    return (\n      <Dropdown\n        style={{ height: '36px' }}\n        icon=\"group\"\n        labeled\n        className=\"icon\"\n        button\n        text=\"My Rooms\"\n        onClick={this.refreshRooms}\n      >\n        <Dropdown.Menu>\n          {this.state.rooms.length === 0 && (\n            <Dropdown.Item disabled>You have no permanent rooms.</Dropdown.Item>\n          )}\n          {this.state.rooms.map((room: any) => {\n            return (\n              <Dropdown.Item\n                link\n                href={\n                  room.vanity\n                    ? '/r/' + room.vanity\n                    : '/' + room.roomId.replace('/', '#')\n                }\n                onClick={() => {\n                  if (!room.vanity) {\n                    setTimeout(() => window.location.reload(), 100);\n                  }\n                }}\n              >\n                <div style={{ display: 'flex' }}>\n                  {room.vanity\n                    ? `/r/${room.vanity}`\n                    : room.roomId.replace('/', '#')}\n                  <div style={{ marginLeft: 'auto', paddingLeft: '20px' }}>\n                    <Popup\n                      content=\"Delete room\"\n                      trigger={\n                        <Icon\n                          onClick={(e: React.MouseEvent) => {\n                            e.stopPropagation();\n                            this.deleteRoom(room.roomId);\n                          }}\n                          name=\"x\"\n                          color=\"red\"\n                        />\n                      }\n                    />\n                  </div>\n                </div>\n              </Dropdown.Item>\n            );\n          })}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport class TopBar extends React.Component<{\n  user?: any;\n  hideNewRoom?: boolean;\n  hideSignin?: boolean;\n  hideMyRooms?: boolean;\n}> {\n  render() {\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: '1em',\n            paddingBottom: '0px',\n          }}\n        >\n          <a href=\"/\" style={{ display: 'flex' }}>\n            {/* <div\n              style={{\n                height: '48px',\n                width: '48px',\n                marginRight: '10px',\n                borderRadius: '50%',\n                position: 'relative',\n                backgroundColor: '#' + getColorHex('blue8'),\n              }}\n            >\n              <Icon\n                inverted\n                name=\"film\"\n                size=\"large\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n              <Icon\n                inverted\n                name=\"group\"\n                size=\"large\"\n                color=\"green\"\n                style={{\n                  position: 'absolute',\n                  bottom: 8,\n                  width: '100%',\n                  margin: '0 auto', \n                }}\n              />\n            </div> */}\n            <img src=\"/fayrtv_logo.png\" alt=\"FAYR TV\"></img>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              {/* <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#2185d0',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                }}\n              >\n                FAYR\n              </div>\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#21ba45',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                  marginLeft: 'auto',\n                }}\n              >\n                TV\n              </div> */}\n            </div>\n          </a>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: '10px',\n              alignItems: 'center',\n            }}\n          >\n            {/* <a\n              href=\"https://discord.gg/3rYj5HV\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"Discord\"\n            >\n              <Icon name=\"discord\" size=\"big\" link />\n            </a>\n            <a\n              href=\"https://github.com/howardchung/watchparty\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"GitHub\"\n            >\n              <Icon name=\"github\" size=\"big\" link />\n            </a>\n          </div>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: 'auto',\n            }}\n          > */}\n            {!this.props.hideNewRoom && <NewRoomButton />}\n            {!this.props.hideMyRooms && this.props.user && (\n              <ListRoomsButton user={this.props.user} />\n            )}\n            {!this.props.hideSignin && <SignInButton user={this.props.user} />}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}